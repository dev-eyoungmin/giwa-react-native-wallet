"use strict";(globalThis.webpackChunkgiwa_react_native_sdk_docs=globalThis.webpackChunkgiwa_react_native_sdk_docs||[]).push([[395],{7822(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>a,toc:()=>i});const a=JSON.parse('{"id":"testing/integration-tests","title":"\ud1b5\ud569 \ud14c\uc2a4\ud2b8","description":"\uc5ec\ub7ec Hook\uc744 \uc870\ud569\ud55c \uc804\uccb4 \ud50c\ub85c\uc6b0\uc758 \ud1b5\ud569 \ud14c\uc2a4\ud2b8 \uc791\uc131 \ubc29\ubc95\uc785\ub2c8\ub2e4.","source":"@site/docs/testing/integration-tests.md","sourceDirName":"testing","slug":"/testing/integration-tests","permalink":"/giwa-react-native-wallet/en/docs/testing/integration-tests","draft":false,"unlisted":false,"editUrl":"https://github.com/devym-37/giwa-react-native-wallet/tree/main/docs/docs/testing/integration-tests.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"\uc720\ub2db \ud14c\uc2a4\ud2b8","permalink":"/giwa-react-native-wallet/en/docs/testing/unit-tests"},"next":{"title":"E2E \ud14c\uc2a4\ud2b8","permalink":"/giwa-react-native-wallet/en/docs/testing/e2e-tests"}}');var s=t(6070),r=t(8193);const l={sidebar_position:3},o="\ud1b5\ud569 \ud14c\uc2a4\ud2b8",c={},i=[{value:"\uc9c0\uac11 \uc0dd\uc131 \u2192 \uc794\uc561 \uc870\ud68c \ud50c\ub85c\uc6b0",id:"\uc9c0\uac11-\uc0dd\uc131--\uc794\uc561-\uc870\ud68c-\ud50c\ub85c\uc6b0",level:2},{value:"\uc9c0\uac11 \ubcf5\uad6c \u2192 \ud2b8\ub79c\uc7ad\uc158 \uc804\uc1a1 \ud50c\ub85c\uc6b0",id:"\uc9c0\uac11-\ubcf5\uad6c--\ud2b8\ub79c\uc7ad\uc158-\uc804\uc1a1-\ud50c\ub85c\uc6b0",level:2},{value:"\ud1a0\ud070 \uc804\uc1a1 \ud50c\ub85c\uc6b0",id:"\ud1a0\ud070-\uc804\uc1a1-\ud50c\ub85c\uc6b0",level:2},{value:"GIWA ID \ud50c\ub85c\uc6b0",id:"giwa-id-\ud50c\ub85c\uc6b0",level:2},{value:"Flashblocks \ud50c\ub85c\uc6b0",id:"flashblocks-\ud50c\ub85c\uc6b0",level:2},{value:"\uc804\uccb4 \uc9c0\uac11 \ud50c\ub85c\uc6b0 \ud14c\uc2a4\ud2b8",id:"\uc804\uccb4-\uc9c0\uac11-\ud50c\ub85c\uc6b0-\ud14c\uc2a4\ud2b8",level:2},{value:"\ub2e4\uc74c \ub2e8\uacc4",id:"\ub2e4\uc74c-\ub2e8\uacc4",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\ud1b5\ud569-\ud14c\uc2a4\ud2b8",children:"\ud1b5\ud569 \ud14c\uc2a4\ud2b8"})}),"\n",(0,s.jsx)(n.p,{children:"\uc5ec\ub7ec Hook\uc744 \uc870\ud569\ud55c \uc804\uccb4 \ud50c\ub85c\uc6b0\uc758 \ud1b5\ud569 \ud14c\uc2a4\ud2b8 \uc791\uc131 \ubc29\ubc95\uc785\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.h2,{id:"\uc9c0\uac11-\uc0dd\uc131--\uc794\uc561-\uc870\ud68c-\ud50c\ub85c\uc6b0",children:"\uc9c0\uac11 \uc0dd\uc131 \u2192 \uc794\uc561 \uc870\ud68c \ud50c\ub85c\uc6b0"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// __tests__/integration/walletFlow.test.ts\nimport { renderHook, act, waitFor } from '@testing-library/react-hooks';\nimport {\n  useGiwaWallet,\n  useBalance,\n  GiwaProvider,\n} from '@giwa/react-native-wallet';\nimport React from 'react';\n\nconst wrapper = ({ children }: { children: React.ReactNode }) => (\n  <GiwaProvider config={{ network: 'testnet' }}>\n    {children}\n  </GiwaProvider>\n);\n\ndescribe('Wallet Creation Flow', () => {\n  it('should create wallet and fetch balance', async () => {\n    // 1. \uc9c0\uac11 \uc0dd\uc131\n    const { result: walletResult } = renderHook(() => useGiwaWallet(), {\n      wrapper,\n    });\n\n    let walletAddress: string;\n\n    await act(async () => {\n      const { wallet } = await walletResult.current.createWallet();\n      walletAddress = wallet.address;\n    });\n\n    expect(walletResult.current.wallet).not.toBeNull();\n\n    // 2. \uc794\uc561 \uc870\ud68c\n    const { result: balanceResult } = renderHook(\n      () => useBalance(walletAddress),\n      { wrapper }\n    );\n\n    await waitFor(() => {\n      expect(balanceResult.current.isLoading).toBe(false);\n    });\n\n    expect(balanceResult.current.balance).toBeDefined();\n    expect(balanceResult.current.formattedBalance).toBeDefined();\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\uc9c0\uac11-\ubcf5\uad6c--\ud2b8\ub79c\uc7ad\uc158-\uc804\uc1a1-\ud50c\ub85c\uc6b0",children:"\uc9c0\uac11 \ubcf5\uad6c \u2192 \ud2b8\ub79c\uc7ad\uc158 \uc804\uc1a1 \ud50c\ub85c\uc6b0"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// __tests__/integration/transactionFlow.test.ts\nimport { renderHook, act, waitFor } from '@testing-library/react-hooks';\nimport {\n  useGiwaWallet,\n  useBalance,\n  useTransaction,\n} from '@giwa/react-native-wallet';\n\ndescribe('Transaction Flow', () => {\n  const testMnemonic =\n    'abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about';\n\n  it('should recover wallet and send transaction', async () => {\n    // 1. \uc9c0\uac11 \ubcf5\uad6c\n    const { result: walletResult } = renderHook(() => useGiwaWallet(), {\n      wrapper,\n    });\n\n    await act(async () => {\n      await walletResult.current.recoverWallet(testMnemonic);\n    });\n\n    expect(walletResult.current.wallet).not.toBeNull();\n    const senderAddress = walletResult.current.wallet!.address;\n\n    // 2. \uc794\uc561 \ud655\uc778\n    const { result: balanceResult } = renderHook(\n      () => useBalance(senderAddress),\n      { wrapper }\n    );\n\n    await waitFor(() => {\n      expect(balanceResult.current.isLoading).toBe(false);\n    });\n\n    // 3. \ud2b8\ub79c\uc7ad\uc158 \uc804\uc1a1 (\uc794\uc561\uc774 \uc788\ub294 \uacbd\uc6b0)\n    if (balanceResult.current.balance! > BigInt(0)) {\n      const { result: txResult } = renderHook(() => useTransaction(), {\n        wrapper,\n      });\n\n      await act(async () => {\n        const hash = await txResult.current.sendTransaction({\n          to: '0x0000000000000000000000000000000000000001',\n          value: '0.001',\n        });\n\n        expect(hash).toMatch(/^0x[a-fA-F0-9]{64}$/);\n      });\n    }\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\ud1a0\ud070-\uc804\uc1a1-\ud50c\ub85c\uc6b0",children:"\ud1a0\ud070 \uc804\uc1a1 \ud50c\ub85c\uc6b0"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// __tests__/integration/tokenFlow.test.ts\nimport { renderHook, act, waitFor } from '@testing-library/react-hooks';\nimport { useGiwaWallet, useTokens } from '@giwa/react-native-wallet';\n\nconst MOCK_TOKEN = '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48';\nconst RECIPIENT = '0x0000000000000000000000000000000000000001';\n\ndescribe('Token Flow', () => {\n  it('should get token info and balance', async () => {\n    // 1. \uc9c0\uac11 \uc0dd\uc131\n    const { result: walletResult } = renderHook(() => useGiwaWallet(), {\n      wrapper,\n    });\n\n    await act(async () => {\n      await walletResult.current.createWallet();\n    });\n\n    // 2. \ud1a0\ud070 \uc815\ubcf4 \uc870\ud68c\n    const { result: tokenResult } = renderHook(() => useTokens(), { wrapper });\n\n    await act(async () => {\n      const info = await tokenResult.current.getTokenInfo(MOCK_TOKEN);\n\n      expect(info.symbol).toBeDefined();\n      expect(info.decimals).toBeGreaterThan(0);\n    });\n\n    // 3. \ud1a0\ud070 \uc794\uc561 \uc870\ud68c\n    await act(async () => {\n      const balance = await tokenResult.current.getBalance(MOCK_TOKEN);\n\n      expect(balance.token.address.toLowerCase()).toBe(\n        MOCK_TOKEN.toLowerCase()\n      );\n      expect(balance.formattedBalance).toBeDefined();\n    });\n  });\n\n  it('should approve and transfer tokens', async () => {\n    const { result: walletResult } = renderHook(() => useGiwaWallet(), {\n      wrapper,\n    });\n\n    await act(async () => {\n      await walletResult.current.createWallet();\n    });\n\n    const { result: tokenResult } = renderHook(() => useTokens(), { wrapper });\n\n    // Approve\n    await act(async () => {\n      const approveHash = await tokenResult.current.approve(\n        MOCK_TOKEN,\n        RECIPIENT,\n        '1000'\n      );\n      expect(approveHash).toMatch(/^0x[a-fA-F0-9]{64}$/);\n    });\n\n    // Check allowance\n    await act(async () => {\n      const allowance = await tokenResult.current.allowance(\n        MOCK_TOKEN,\n        RECIPIENT\n      );\n      expect(allowance.amount).toBeDefined();\n    });\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"giwa-id-\ud50c\ub85c\uc6b0",children:"GIWA ID \ud50c\ub85c\uc6b0"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// __tests__/integration/giwaIdFlow.test.ts\nimport { renderHook, act } from '@testing-library/react-hooks';\nimport { useGiwaWallet, useGiwaId } from '@giwa/react-native-wallet';\n\ndescribe('GIWA ID Flow', () => {\n  it('should resolve name and address', async () => {\n    const { result: walletResult } = renderHook(() => useGiwaWallet(), {\n      wrapper,\n    });\n\n    await act(async () => {\n      await walletResult.current.createWallet();\n    });\n\n    const { result: giwaIdResult } = renderHook(() => useGiwaId(), { wrapper });\n\n    // \uc774\ub984 \u2192 \uc8fc\uc18c \uc870\ud68c\n    await act(async () => {\n      const address = await giwaIdResult.current.resolveAddress('test.giwa.id');\n      // null\uc774\uac70\ub098 \uc8fc\uc18c \ud615\uc2dd\n      if (address) {\n        expect(address).toMatch(/^0x[a-fA-F0-9]{40}$/);\n      }\n    });\n\n    // \uc774\ub984 \uc0ac\uc6a9 \uac00\ub2a5 \uc5ec\ubd80\n    await act(async () => {\n      const available = await giwaIdResult.current.isNameAvailable(\n        'random-test-name-12345'\n      );\n      expect(typeof available).toBe('boolean');\n    });\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"flashblocks-\ud50c\ub85c\uc6b0",children:"Flashblocks \ud50c\ub85c\uc6b0"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// __tests__/integration/flashblocksFlow.test.ts\nimport { renderHook, act } from '@testing-library/react-hooks';\nimport { useGiwaWallet, useFlashblocks } from '@giwa/react-native-wallet';\nimport { parseEther } from 'viem';\n\ndescribe('Flashblocks Flow', () => {\n  it('should send flashblocks transaction', async () => {\n    const { result: walletResult } = renderHook(() => useGiwaWallet(), {\n      wrapper,\n    });\n\n    await act(async () => {\n      await walletResult.current.createWallet();\n    });\n\n    const { result: flashResult } = renderHook(() => useFlashblocks(), {\n      wrapper,\n    });\n\n    // Flashblocks \uc0ac\uc6a9 \uac00\ub2a5 \uc5ec\ubd80 \ud655\uc778\n    if (flashResult.current.isAvailable) {\n      await act(async () => {\n        const { preconfirmation, result } =\n          await flashResult.current.sendTransaction({\n            to: '0x0000000000000000000000000000000000000001',\n            value: parseEther('0.001'),\n          });\n\n        // \uc0ac\uc804 \ud655\uc778 \uac80\uc99d\n        expect(preconfirmation.txHash).toMatch(/^0x[a-fA-F0-9]{64}$/);\n        expect(preconfirmation.latencyMs).toBeLessThan(1000);\n\n        // \ube14\ub85d \ud655\uc778 \ub300\uae30\n        const receipt = await result.wait();\n        expect(receipt.status).toBe('success');\n      });\n    }\n  });\n\n  it('should track average latency', async () => {\n    const { result: flashResult } = renderHook(() => useFlashblocks(), {\n      wrapper,\n    });\n\n    const latency = flashResult.current.getAverageLatency();\n    expect(typeof latency).toBe('number');\n    expect(latency).toBeGreaterThanOrEqual(0);\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\uc804\uccb4-\uc9c0\uac11-\ud50c\ub85c\uc6b0-\ud14c\uc2a4\ud2b8",children:"\uc804\uccb4 \uc9c0\uac11 \ud50c\ub85c\uc6b0 \ud14c\uc2a4\ud2b8"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// __tests__/integration/fullFlow.test.ts\nimport { renderHook, act, waitFor } from '@testing-library/react-hooks';\nimport {\n  useGiwaWallet,\n  useBalance,\n  useTransaction,\n  useTokens,\n  useFaucet,\n} from '@giwa/react-native-wallet';\n\ndescribe('Full Wallet Flow', () => {\n  it('should complete entire wallet lifecycle', async () => {\n    // === 1. \uc9c0\uac11 \uc0dd\uc131 ===\n    const { result: walletResult } = renderHook(() => useGiwaWallet(), {\n      wrapper,\n    });\n\n    let walletAddress: string;\n    let mnemonic: string;\n\n    await act(async () => {\n      const result = await walletResult.current.createWallet();\n      walletAddress = result.wallet.address;\n      mnemonic = result.mnemonic;\n    });\n\n    expect(walletAddress).toMatch(/^0x[a-fA-F0-9]{40}$/);\n    expect(mnemonic.split(' ')).toHaveLength(12);\n\n    // === 2. \uc794\uc561 \uc870\ud68c ===\n    const { result: balanceResult } = renderHook(\n      () => useBalance(walletAddress),\n      { wrapper }\n    );\n\n    await waitFor(() => {\n      expect(balanceResult.current.isLoading).toBe(false);\n    });\n\n    // === 3. Faucet \uc694\uccad (\ud14c\uc2a4\ud2b8\ub137) ===\n    const { result: faucetResult } = renderHook(() => useFaucet(), { wrapper });\n\n    await act(async () => {\n      try {\n        const result = await faucetResult.current.requestFaucet();\n        expect(result.txHash).toMatch(/^0x[a-fA-F0-9]{64}$/);\n      } catch (error) {\n        // Faucet \uc81c\ud55c\uc77c \uc218 \uc788\uc74c\n        console.log('Faucet rate limited');\n      }\n    });\n\n    // === 4. \uc9c0\uac11 \uc5f0\uacb0 \ud574\uc81c ===\n    await act(async () => {\n      await walletResult.current.disconnect();\n    });\n\n    expect(walletResult.current.wallet).toBeNull();\n\n    // === 5. \uc9c0\uac11 \ubcf5\uad6c ===\n    await act(async () => {\n      const recovered = await walletResult.current.recoverWallet(mnemonic);\n      expect(recovered.address.toLowerCase()).toBe(walletAddress.toLowerCase());\n    });\n\n    // === 6. \ucd5c\uc885 \uc0c1\ud0dc \ud655\uc778 ===\n    expect(walletResult.current.wallet?.isConnected).toBe(true);\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\ub2e4\uc74c-\ub2e8\uacc4",children:"\ub2e4\uc74c \ub2e8\uacc4"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/testing/e2e-tests",children:"E2E \ud14c\uc2a4\ud2b8"})," - Detox\ub97c \uc0ac\uc6a9\ud55c E2E \ud14c\uc2a4\ud2b8"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8193(e,n,t){t.d(n,{R:()=>l,x:()=>o});var a=t(758);const s={},r=a.createContext(s);function l(e){const n=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);