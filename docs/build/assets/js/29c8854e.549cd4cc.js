"use strict";(globalThis.webpackChunkgiwa_react_native_sdk_docs=globalThis.webpackChunkgiwa_react_native_sdk_docs||[]).push([[889],{8193(e,n,t){t.d(n,{R:()=>o,x:()=>c});var a=t(758);const r={},s=a.createContext(r);function o(e){const n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),a.createElement(s.Provider,{value:n},e.children)}},9614(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>d,frontMatter:()=>o,metadata:()=>a,toc:()=>i});const a=JSON.parse('{"id":"testing/unit-tests","title":"\uc720\ub2db \ud14c\uc2a4\ud2b8","description":"GIWA SDK Hook\ub4e4\uc758 \uc720\ub2db \ud14c\uc2a4\ud2b8 \uc791\uc131 \ubc29\ubc95\uc785\ub2c8\ub2e4.","source":"@site/docs/testing/unit-tests.md","sourceDirName":"testing","slug":"/testing/unit-tests","permalink":"/giwa-react-native-wallet/docs/testing/unit-tests","draft":false,"unlisted":false,"editUrl":"https://github.com/devym-37/giwa-react-native-wallet/tree/main/docs/docs/testing/unit-tests.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"\ud14c\uc2a4\ud2b8 \uc124\uc815","permalink":"/giwa-react-native-wallet/docs/testing/setup"},"next":{"title":"\ud1b5\ud569 \ud14c\uc2a4\ud2b8","permalink":"/giwa-react-native-wallet/docs/testing/integration-tests"}}');var r=t(6070),s=t(8193);const o={sidebar_position:2},c="\uc720\ub2db \ud14c\uc2a4\ud2b8",l={},i=[{value:"useGiwaWallet \ud14c\uc2a4\ud2b8",id:"usegiwawallet-\ud14c\uc2a4\ud2b8",level:2},{value:"useBalance \ud14c\uc2a4\ud2b8",id:"usebalance-\ud14c\uc2a4\ud2b8",level:2},{value:"useTransaction \ud14c\uc2a4\ud2b8",id:"usetransaction-\ud14c\uc2a4\ud2b8",level:2},{value:"useTokens \ud14c\uc2a4\ud2b8",id:"usetokens-\ud14c\uc2a4\ud2b8",level:2},{value:"\ud14c\uc2a4\ud2b8 \uc2e4\ud589",id:"\ud14c\uc2a4\ud2b8-\uc2e4\ud589",level:2},{value:"\ub2e4\uc74c \ub2e8\uacc4",id:"\ub2e4\uc74c-\ub2e8\uacc4",level:2}];function u(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\uc720\ub2db-\ud14c\uc2a4\ud2b8",children:"\uc720\ub2db \ud14c\uc2a4\ud2b8"})}),"\n",(0,r.jsx)(n.p,{children:"GIWA SDK Hook\ub4e4\uc758 \uc720\ub2db \ud14c\uc2a4\ud2b8 \uc791\uc131 \ubc29\ubc95\uc785\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.h2,{id:"usegiwawallet-\ud14c\uc2a4\ud2b8",children:"useGiwaWallet \ud14c\uc2a4\ud2b8"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// __tests__/hooks/useGiwaWallet.test.ts\nimport { renderHook, act, waitFor } from '@testing-library/react-hooks';\nimport { useGiwaWallet } from '@giwa/react-native-wallet';\nimport { hookWrapper } from '../test-utils';\n\ndescribe('useGiwaWallet', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('createWallet', () => {\n    it('should create a new wallet with valid address and mnemonic', async () => {\n      const { result } = renderHook(() => useGiwaWallet(), {\n        wrapper: hookWrapper,\n      });\n\n      await act(async () => {\n        const { wallet, mnemonic } = await result.current.createWallet();\n\n        // \uc8fc\uc18c \ud615\uc2dd \uac80\uc99d\n        expect(wallet.address).toMatch(/^0x[a-fA-F0-9]{40}$/);\n\n        // \ub2c8\ubaa8\ub2c9 12\ub2e8\uc5b4 \uac80\uc99d\n        expect(mnemonic.split(' ')).toHaveLength(12);\n      });\n\n      // \uc9c0\uac11 \uc5f0\uacb0 \uc0c1\ud0dc \ud655\uc778\n      expect(result.current.wallet).not.toBeNull();\n      expect(result.current.wallet?.isConnected).toBe(true);\n    });\n\n    it('should set loading state during wallet creation', async () => {\n      const { result } = renderHook(() => useGiwaWallet(), {\n        wrapper: hookWrapper,\n      });\n\n      expect(result.current.isLoading).toBe(false);\n\n      const createPromise = act(async () => {\n        return result.current.createWallet();\n      });\n\n      // \ub85c\ub529 \uc0c1\ud0dc \ud655\uc778\n      await waitFor(() => {\n        expect(result.current.isLoading).toBe(true);\n      });\n\n      await createPromise;\n\n      expect(result.current.isLoading).toBe(false);\n    });\n  });\n\n  describe('recoverWallet', () => {\n    const validMnemonic =\n      'abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about';\n    const expectedAddress = '0x9858EfFD232B4033E47d90003D41EC34EcaEda94';\n\n    it('should recover wallet from valid mnemonic', async () => {\n      const { result } = renderHook(() => useGiwaWallet(), {\n        wrapper: hookWrapper,\n      });\n\n      await act(async () => {\n        const wallet = await result.current.recoverWallet(validMnemonic);\n        expect(wallet.address.toLowerCase()).toBe(expectedAddress.toLowerCase());\n      });\n    });\n\n    it('should throw error for invalid mnemonic', async () => {\n      const { result } = renderHook(() => useGiwaWallet(), {\n        wrapper: hookWrapper,\n      });\n\n      await expect(\n        result.current.recoverWallet('invalid mnemonic phrase')\n      ).rejects.toThrow();\n    });\n\n    it('should throw error for mnemonic with wrong word count', async () => {\n      const { result } = renderHook(() => useGiwaWallet(), {\n        wrapper: hookWrapper,\n      });\n\n      await expect(\n        result.current.recoverWallet('one two three four five')\n      ).rejects.toThrow();\n    });\n  });\n\n  describe('disconnect', () => {\n    it('should clear wallet after disconnect', async () => {\n      const { result } = renderHook(() => useGiwaWallet(), {\n        wrapper: hookWrapper,\n      });\n\n      // \uba3c\uc800 \uc9c0\uac11 \uc0dd\uc131\n      await act(async () => {\n        await result.current.createWallet();\n      });\n\n      expect(result.current.wallet).not.toBeNull();\n\n      // \uc5f0\uacb0 \ud574\uc81c\n      await act(async () => {\n        await result.current.disconnect();\n      });\n\n      expect(result.current.wallet).toBeNull();\n    });\n  });\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"usebalance-\ud14c\uc2a4\ud2b8",children:"useBalance \ud14c\uc2a4\ud2b8"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// __tests__/hooks/useBalance.test.ts\nimport { renderHook, waitFor } from '@testing-library/react-hooks';\nimport { useBalance } from '@giwa/react-native-wallet';\nimport { hookWrapper } from '../test-utils';\n\n// Mock \uc124\uc815\nconst mockGetBalance = jest.fn();\njest.mock('viem', () => ({\n  ...jest.requireActual('viem'),\n  createPublicClient: () => ({\n    getBalance: mockGetBalance,\n  }),\n}));\n\ndescribe('useBalance', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    mockGetBalance.mockResolvedValue(BigInt('1000000000000000000')); // 1 ETH\n  });\n\n  it('should fetch and format balance correctly', async () => {\n    const { result } = renderHook(\n      () => useBalance('0x1234567890123456789012345678901234567890'),\n      { wrapper: hookWrapper }\n    );\n\n    await waitFor(() => {\n      expect(result.current.isLoading).toBe(false);\n    });\n\n    expect(result.current.balance).toBe(BigInt('1000000000000000000'));\n    expect(result.current.formattedBalance).toBe('1.0');\n  });\n\n  it('should handle zero balance', async () => {\n    mockGetBalance.mockResolvedValue(BigInt(0));\n\n    const { result } = renderHook(\n      () => useBalance('0x1234567890123456789012345678901234567890'),\n      { wrapper: hookWrapper }\n    );\n\n    await waitFor(() => {\n      expect(result.current.isLoading).toBe(false);\n    });\n\n    expect(result.current.formattedBalance).toBe('0.0');\n  });\n\n  it('should handle small balance', async () => {\n    mockGetBalance.mockResolvedValue(BigInt('1000000000000000')); // 0.001 ETH\n\n    const { result } = renderHook(\n      () => useBalance('0x1234567890123456789012345678901234567890'),\n      { wrapper: hookWrapper }\n    );\n\n    await waitFor(() => {\n      expect(result.current.isLoading).toBe(false);\n    });\n\n    expect(result.current.formattedBalance).toBe('0.001');\n  });\n\n  it('should refetch balance on demand', async () => {\n    const { result } = renderHook(\n      () => useBalance('0x1234567890123456789012345678901234567890'),\n      { wrapper: hookWrapper }\n    );\n\n    await waitFor(() => {\n      expect(result.current.isLoading).toBe(false);\n    });\n\n    expect(mockGetBalance).toHaveBeenCalledTimes(1);\n\n    // \uc794\uc561 \ubcc0\uacbd\n    mockGetBalance.mockResolvedValue(BigInt('2000000000000000000'));\n\n    await result.current.refetch();\n\n    await waitFor(() => {\n      expect(result.current.formattedBalance).toBe('2.0');\n    });\n\n    expect(mockGetBalance).toHaveBeenCalledTimes(2);\n  });\n\n  it('should handle network errors', async () => {\n    mockGetBalance.mockRejectedValue(new Error('Network error'));\n\n    const { result } = renderHook(\n      () => useBalance('0x1234567890123456789012345678901234567890'),\n      { wrapper: hookWrapper }\n    );\n\n    await waitFor(() => {\n      expect(result.current.isLoading).toBe(false);\n    });\n\n    expect(result.current.error).not.toBeNull();\n  });\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"usetransaction-\ud14c\uc2a4\ud2b8",children:"useTransaction \ud14c\uc2a4\ud2b8"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// __tests__/hooks/useTransaction.test.ts\nimport { renderHook, act } from '@testing-library/react-hooks';\nimport { useTransaction } from '@giwa/react-native-wallet';\nimport { hookWrapper } from '../test-utils';\n\ndescribe('useTransaction', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('sendTransaction', () => {\n    it('should send transaction and return hash', async () => {\n      const { result } = renderHook(() => useTransaction(), {\n        wrapper: hookWrapper,\n      });\n\n      await act(async () => {\n        const hash = await result.current.sendTransaction({\n          to: '0x1234567890123456789012345678901234567890',\n          value: '0.1',\n        });\n\n        expect(hash).toMatch(/^0x[a-fA-F0-9]{64}$/);\n      });\n    });\n\n    it('should throw error for invalid address', async () => {\n      const { result } = renderHook(() => useTransaction(), {\n        wrapper: hookWrapper,\n      });\n\n      await expect(\n        result.current.sendTransaction({\n          to: 'invalid-address',\n          value: '0.1',\n        })\n      ).rejects.toThrow();\n    });\n  });\n\n  describe('estimateGas', () => {\n    it('should estimate gas for transaction', async () => {\n      const { result } = renderHook(() => useTransaction(), {\n        wrapper: hookWrapper,\n      });\n\n      await act(async () => {\n        const estimate = await result.current.estimateGas({\n          to: '0x1234567890123456789012345678901234567890',\n          value: '0.1',\n        });\n\n        expect(estimate.gasLimit).toBeDefined();\n        expect(estimate.gasPrice).toBeDefined();\n        expect(estimate.estimatedFee).toBeDefined();\n      });\n    });\n  });\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"usetokens-\ud14c\uc2a4\ud2b8",children:"useTokens \ud14c\uc2a4\ud2b8"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// __tests__/hooks/useTokens.test.ts\nimport { renderHook, act } from '@testing-library/react-hooks';\nimport { useTokens } from '@giwa/react-native-wallet';\nimport { hookWrapper } from '../test-utils';\n\nconst MOCK_TOKEN_ADDRESS = '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48';\n\ndescribe('useTokens', () => {\n  describe('getTokenInfo', () => {\n    it('should return token information', async () => {\n      const { result } = renderHook(() => useTokens(), {\n        wrapper: hookWrapper,\n      });\n\n      await act(async () => {\n        const info = await result.current.getTokenInfo(MOCK_TOKEN_ADDRESS);\n\n        expect(info.symbol).toBeDefined();\n        expect(info.decimals).toBeDefined();\n        expect(info.name).toBeDefined();\n      });\n    });\n  });\n\n  describe('getBalance', () => {\n    it('should return formatted token balance', async () => {\n      const { result } = renderHook(() => useTokens(), {\n        wrapper: hookWrapper,\n      });\n\n      await act(async () => {\n        const balance = await result.current.getBalance(MOCK_TOKEN_ADDRESS);\n\n        expect(balance.token).toBeDefined();\n        expect(balance.formattedBalance).toBeDefined();\n      });\n    });\n  });\n\n  describe('transfer', () => {\n    it('should transfer tokens and return tx hash', async () => {\n      const { result } = renderHook(() => useTokens(), {\n        wrapper: hookWrapper,\n      });\n\n      await act(async () => {\n        const hash = await result.current.transfer(\n          MOCK_TOKEN_ADDRESS,\n          '0x1234567890123456789012345678901234567890',\n          '100'\n        );\n\n        expect(hash).toMatch(/^0x[a-fA-F0-9]{64}$/);\n      });\n    });\n  });\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\ud14c\uc2a4\ud2b8-\uc2e4\ud589",children:"\ud14c\uc2a4\ud2b8 \uc2e4\ud589"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# \ubaa8\ub4e0 \ud14c\uc2a4\ud2b8 \uc2e4\ud589\nnpm test\n\n# \ud2b9\uc815 \ud30c\uc77c \ud14c\uc2a4\ud2b8\nnpm test -- useGiwaWallet.test.ts\n\n# \ucee4\ubc84\ub9ac\uc9c0 \ud3ec\ud568\nnpm test -- --coverage\n\n# Watch \ubaa8\ub4dc\nnpm test -- --watch\n\n# \ud2b9\uc815 \ud14c\uc2a4\ud2b8\ub9cc \uc2e4\ud589\nnpm test -- --testNamePattern="should create a new wallet"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\ub2e4\uc74c-\ub2e8\uacc4",children:"\ub2e4\uc74c \ub2e8\uacc4"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/testing/integration-tests",children:"\ud1b5\ud569 \ud14c\uc2a4\ud2b8"})," - \uc804\uccb4 \ud50c\ub85c\uc6b0 \ud14c\uc2a4\ud2b8"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/testing/e2e-tests",children:"E2E \ud14c\uc2a4\ud2b8"})," - Detox \ud14c\uc2a4\ud2b8"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}}}]);